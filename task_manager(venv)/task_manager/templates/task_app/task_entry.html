{% extends "base.html" %}
{% load static %}
{% block content %}
<br><br>
<div class="container mx-auto">

    <div class="card">
        <div class="card-header">
            <div class="row">
                <div class="col-9">
                    <h5 class="card-title">{{ task.title }}</h5>
                </div>
                <div class="col">
                    <p>Created on: {{task.created}}</p>                    
                    <p>Last Modifiled: {{task.updated}}</p>
                    <p>Deadline: {{task.due_date}}</p>
                </div>
            </div>
        </div>
        <div class="card-body">
            <p>
                {{task.description}}
            </p>
        </div>
        <hr>
        <div class="row">
            <div class="col">
                <div class="d-flex flex-row flex-wrap">
                    <!-- Cards with images displayed horizontally -->
                    {% for task_image in task.taskimage_set.all  %}
                    <div class="card m-1" style="width: 17rem; height: 8rem; overflow: hidden;">
                        <img src="{{ task_image.image.url }}" class="card-img-top" alt="..."
                             style="width: 100%; height: 100%; object-fit: cover;">
                    </div>
                    {% endfor %}
                    <div class="card m-1 text-secondary" style="width: 14rem; height: 8rem; position: relative; background-color: rgb(230, 230, 230); border: 2px dashed grey;">
                        <form method="POST" enctype="multipart/form-data" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%;">
                            {% csrf_token %}
                            <input type="file" name="task_image" accept="image/*" style="width: 100%; height: 100%; opacity: 0; cursor: pointer; position: absolute; top: 0; left: 0; z-index: 1;">
                            <h5 style="height: 100%; display: flex; justify-content: center; align-items: center; position: relative; z-index: 2;">Add Image</h5>
                            <input type="submit" value="Upload" style="display: none;">
                        </form>
                    </div>
                </div>
            </div>
        </div>
        
        
        
          <hr>
        <div class="card-footer text-muted">
            <form method="POST">
                {% csrf_token %}

                {% if task.task_complete %}
                <input type="submit" name="submit" value="Task Completed" class="btn btn-warning" disabled>
                {% else %}
                <input type="submit" name="submit" value="Mark As Complete" class="btn btn-warning">
                {% endif %}
                
              </form>
            <button class="btn btn-secondary">Edit</button>
        </div>
    </div>

</div>
{% endblock content %}